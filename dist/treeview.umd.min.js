!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.treeview=e()}}(function(){return function e(n,t,r){function i(a,s){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){var t=n[a][1][e];return i(t?t:e)},c,c.exports,e,n,t,r)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t.TNode=function(){function e(n,t,i,o){if(r(this,e),!n)throw new Error("TNode requires a `name` arg");this.name=n,this.payload=t,this.parent=i,this.kids=o||[],this.id=Math.random()}return i(e,[{key:"indexOf",value:function(e){if(!e)return-1;for(var n=0;n<this.kids.length;++n)if(e===this.kids[n].name)return n;return-1}},{key:"insert",value:function(e,n){if(Array.isArray(e)&&e.length){var r=this.indexOf(e[0]);if(-1!==r){var i=this.kids[r];return void i.insert(e.slice(1),n)}var o=this,a=new t.TNode(e[0],1===e.length?n:null);o.kid_add(a),a.insert(e.slice(1),n)}}},{key:"kid_add",value:function(e){var n=this;if(!e)return!1;if(Array.isArray(e)){var t=e.filter(function(e){return-1===n.indexOf(e.name)});if(!t.length)return!1;t.map(function(e){return e.parent=n}),this.kids=this.kids.concat(t)}else{if(-1!==this.indexOf(e.name))return!1;e.parent=this,this.kids.push(e)}return!0}},{key:"sort",value:function(e){return e||(e="descending"),this.kids.sort(t.TNode.SortOrder[e])}},{key:"sort_deep",value:function(e){e||(e="descending");var n=function(n,t,r){return n.sort(e),{partial:!0}},t={};this.walk(n,0,[],t),this.sort(e)}},{key:"walk",value:function(e,n,t,r){for(var i=0;i<this.kids.length;++i){var o=e(this.kids[i],n,t);if(o){if(o.final)return r.exit=o.final,r.exit;if(this.kids[i].walk(e,n+1,t,r),r.exit)return r.exit}}}},{key:"find",value:function(){var e=Array.prototype.slice.call(arguments);if(!e.length)return null;var n=e.length,t=function(e,t,r){var i={};return r[t]===e.name&&(n--,i.partial=!0),0===n?(i.final=e,i):i.partial?i:null},r={};return this.walk(t,0,e,r)||null}},{key:"ascendant_of",value:function(e){var n=this.parent;if(n===e.parent)return!1;for(;n;){if(n===e)return!0;n=n.parent}return!1}}]),e}(),t.TNode.SortOrder={ascending:function(e,n){return e.name.localeCompare(n.name)},descending:function(e,n){return n.name.localeCompare(e.name)}};var o=ng.core.Component({selector:"treeview",inputs:["parent","src","selected","node_click","node_print"],directives:[ng.core.forwardRef(function(){return o})],template:'\n<ul class="treeview__node"\n    [class.treeview__node--hidden]="src?.parent && !selected?.ascendant_of(src)">\n  <li *ngFor="let tnode of src?.kids">\n    <span *ngIf="tnode.kids.length"\n	  (click)="toggle_view($event)"\n	  class="treeview__sign {{ sign(tnode) }}">\n    </span>\n\n    <span (click)="node_click ? node_click($event, tnode) : stub_node_click($event, tnode)"\n	  class="treeview__node__display"\n	  [class.treeview__node--selected]="match(tnode, selected)"\n	  [class.treeview__node--leaf]="tnode.kids.length == 0">\n      {{ node_print ? node_print(tnode) : tnode.name }}\n    </span>\n\n    <treeview [parent]="parent" [src]="tnode" [node_click]="node_click"\n	      [node_print]="node_print" [selected]="selected"></treeview>\n  </li>\n</ul>\n'}).Class({constructor:function(){},stub_node_click:function(e,n){alert(n.name)},sign:function(e){return this.selected&&this.selected.ascendant_of(e)?"treeview__sign--expanded":"treeview__sign--collapsed"},match:function(e,n){return e&&n?e.id===n.id:!1},toggle_view:function(e){e.target.classList.toggle("treeview__sign--expanded"),e.target.classList.toggle("treeview__sign--collapsed"),e.target.nextElementSibling.nextElementSibling.children[0].classList.toggle("treeview__node--hidden")}});t.TreeView=o},{}]},{},[1])(1)});