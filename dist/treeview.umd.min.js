!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.treeview=e()}}(function(){var e,n,t;return function e(n,t,r){function i(a,s){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){var t=n[a][1][e];return i(t?t:e)},c,c.exports,e,n,t,r)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t.TNode=function(){function e(n,t,i,o){if(r(this,e),!n)throw new Error("TNode requires a `name` arg");this.name=n,this.payload=t,this.parent=i,this.kids=o||[],this.id=Math.random()}return i(e,[{key:"indexOf",value:function e(n){if(!n)return-1;for(var t=0;t<this.kids.length;++t)if(n===this.kids[t].name)return t;return-1}},{key:"insert",value:function e(n,r){if(Array.isArray(n)&&n.length){var i=this.indexOf(n[0]);if(-1!==i){var o=this.kids[i];return void o.insert(n.slice(1),r)}var a=this,s=new t.TNode(n[0],1===n.length?r:null);a.kid_add(s),s.insert(n.slice(1),r)}}},{key:"kid_add",value:function e(n){var t=this;if(!n)return!1;if(Array.isArray(n)){var r=n.filter(function(e){return-1===t.indexOf(e.name)});if(!r.length)return!1;r.map(function(e){return e.parent=t}),this.kids=this.kids.concat(r)}else{if(-1!==this.indexOf(n.name))return!1;n.parent=this,this.kids.push(n)}return!0}},{key:"sort",value:function e(n){return n||(n="descending"),this.kids.sort(t.TNode.SortOrder[n])}},{key:"sort_deep",value:function e(n){n||(n="descending");var t=function e(t,r,i){return t.sort(n),{partial:!0}},r={};this.walk(t,0,[],r),this.sort(n)}},{key:"walk",value:function e(n,t,r,i){for(var o=0;o<this.kids.length;++o){var a=n(this.kids[o],t,r);if(a){if(a.final)return i.exit=a.final,i.exit;if(this.kids[o].walk(n,t+1,r,i),i.exit)return i.exit}}}},{key:"find",value:function e(){var n=Array.prototype.slice.call(arguments);if(!n.length)return null;var t=n.length,r=function e(n,r,i){var o={};return i[r]===n.name&&(t--,o.partial=!0),0===t?(o.final=n,o):o.partial?o:null},i={};return this.walk(r,0,n,i)||null}},{key:"ascendant_of",value:function e(n){var t=this.parent;if(t===n.parent)return!1;for(;t;){if(t===n)return!0;t=t.parent}return!1}}]),e}(),t.TNode.SortOrder={ascending:function e(n,t){return n.name.localeCompare(t.name)},descending:function e(n,t){return t.name.localeCompare(n.name)}};var o=ng.core.Component({selector:"treeview",inputs:["parent","src","selected","node_click","node_print"],directives:[ng.core.forwardRef(function(){return o})],template:'\n<ul class="treeview-node"\n    [class.hidden]="src?.parent && !selected?.ascendant_of(src)">\n  <li *ngFor="#tnode of src?.kids">\n    <span *ngIf="tnode.kids.length"\n	  (click)="toggle_view($event)" class="{{ sign(tnode) }}">\n    </span>\n\n    <span (click)="node_click ? node_click($event, tnode) : stub_node_click($event, tnode)"\n	  [class.selected]="match(tnode, selected)"\n	  [class.leaf]="tnode.kids.length == 0">\n      {{ node_print ? node_print(tnode) : tnode.name }}\n    </span>\n\n    <treeview [parent]="parent" [src]="tnode" [node_click]="node_click"\n	      [node_print]="node_print" [selected]="selected"></treeview>\n  </li>\n</ul>\n'}).Class({constructor:function e(){},stub_node_click:function e(n,t){alert(t.name)},sign:function e(n){return this.selected&&this.selected.ascendant_of(n)?"treeview__sign--expanded":"treeview__sign--collapsed"},match:function e(n,t){return n&&t?n.id===t.id:!1},toggle_view:function e(n){window.q=n.target,n.target.classList.toggle("treeview__sign--expanded"),n.target.classList.toggle("treeview__sign--collapsed"),n.target.nextElementSibling.nextElementSibling.children[0].classList.toggle("hidden")}});t.TreeView=o},{}]},{},[1])(1)});